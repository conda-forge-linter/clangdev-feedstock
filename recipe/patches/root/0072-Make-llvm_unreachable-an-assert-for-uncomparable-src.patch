From 5f6635f96786e0971112b4416c3c3c672fa45a65 Mon Sep 17 00:00:00 2001
From: Axel Naumann <Axel.Naumann@cern.ch>
Date: Mon, 26 Aug 2013 15:15:48 +0200
Subject: [PATCH 072/107] Make llvm_unreachable an assert for uncomparable
 srclocs / include chains not rooted in main file.

---
 lib/Basic/SourceManager.cpp | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

diff --git a/lib/Basic/SourceManager.cpp b/lib/Basic/SourceManager.cpp
index e5144efa8d..349a492a1f 100644
--- a/lib/Basic/SourceManager.cpp
+++ b/lib/Basic/SourceManager.cpp
@@ -2091,7 +2091,10 @@ bool SourceManager::isBeforeInTranslationUnit(SourceLocation LHS,
       return LIsScratch;
     return LOffs.second < ROffs.second;
   }
-  llvm_unreachable("Unsortable locations found");
+  //AXEL: Work around diags from include chains not rooted in main file.
+  //AXEL: llvm_unreachable("Unsortable locations found");
+  assert(0 && "Unsortable locations found");
+  return LOffs.first < ROffs.first;
 }
 
 std::pair<bool, bool> SourceManager::isInTheSameTranslationUnit(
-- 
2.35.1

